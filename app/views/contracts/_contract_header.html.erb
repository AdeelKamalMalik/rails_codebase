<div class="block p-6 bg-white border border-gray-200 rounded-lg shadow">
  <div class="flex flex-wrap justify-between items-center">
    <div>
      <div class="flex gap-3 items-center">
        <h5 class="text-2xl font-bold text-gray-900 whitespace-nowrap">
          <span class="contract-name<%= contract.id %>"><%= contract.name %></span>
          </h5>
        <div class="relative inline-block text-left" data-controller="dropdown">
          <div>
            <button type="button" class="flex items-center" id="menu-button" aria-expanded="true" aria-haspopup="true" data-action="click->dropdown#toggle click@window->dropdown#hide">
            <span class="sr-only">Open options</span>
            <%= image_tag "icons/horizontal-three-dots.svg" %>
            </button>
          </div>
          <div data-dropdown-target="menu"
            data-transition-enter="transition ease-out duration-200"
            data-transition-enter-from="opacity-0 translate-y-1"
            data-transition-enter-to="opacity-100 translate-y-0"
            data-transition-leave="transition ease-in duration-150"
            data-transition-leave-from="opacity-100 translate-y-0"
            data-transition-leave-to="opacity-0 translate-y-1"
            class="absolute hidden z-10 mt-2 w-56 origin-top-right rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
            <div class="py-1" role="none">
            <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="downloadCsvMenuItem">
              <%= link_to 'Download as CSV', download_csv_contracts_path(format: 'csv', public_id: contract.public_id), class: 'btn-link text-slate-600 hover:text-slate-600' %>
            </p>
              <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="menu-item-1">Rename</p>
              <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="menu-item-2" data-controller="settings" data-action="click->dropdown#toggle click->settings#openModal" data-modal-id="newContract" data-source-type="document" data-resource-id="<%= contract.public_id %>">
                Add Documents
              </p>
              <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="menu-item-3">
              <%= link_to contract.archived? ? 'Unarchive Contract' : 'Archive Contract', contract.archived? ? unarchive_contract_path(contract) : archive_contract_path(contract), class: 'btn-link text-slate-600 hover:text-slate-600' %>
              </p>
              <hr class="text-gray-100">
              <div class="my-3" role="none">
                <span class="text-slate-500 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="menu-item-4">Contract ID</span>
                <p class="hover:bg-gray-200 text-slate-500 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="menu-item-4"><%= contract.public_id %></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-4">
        <%= render partial: 'contracts/expiring' %>
      </div>
    </div>
    <div class="mt-10 md:mt-0">
      <div class="relative inline-block text-left" data-controller="dropdown">
        <div>
          <button  data-dropdown-toggle="dropdown" class="text-black bg-white border hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center font-semibold dark:bg-white dark:hover:bg-gray-100 dark:focus:ring-4" type="button" data-action="click->dropdown#toggle click@window->dropdown#hide">
            <%= render_svg "logo", styles: "fill-current", size: '16*16' %>
            <span class="ml-2">AI Analyzing</span>
            <svg class="w-2.5 h-2.5 ms-3 text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
            </svg>
          </button>
        </div>
        <div data-dropdown-target="menu"
          data-transition-enter="transition ease-out duration-200"
          data-transition-enter-from="opacity-0 translate-y-1"
          data-transition-enter-to="opacity-100 translate-y-0"
          data-transition-leave="transition ease-in duration-150"
          data-transition-leave-from="opacity-100 translate-y-0"
          data-transition-leave-to="opacity-0 translate-y-1"
          class="absolute hidden z-10 mt-2 w-56 origin-top-right rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
          <div class="py-1" role="none">
            <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" 
              role="menuitem" tabindex="-1" id="menu-item-0" 
              data-controller="contracts" 
              data-action="click->contracts#updateContractReviewInput" 
              data-review-param="needs_review" 
              data-contract-public-id="<%= contract.public_id %>" 
              data-vendor-public-id="<%= contract.vendor&.public_id %>">Review Needed</p>
            <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" 
              role="menuitem" tabindex="-1" id="menu-item-1" 
              data-controller="contracts" 
              data-action="click->contracts#updateContractReviewInput" 
              data-review-param="reviewed" 
              data-contract-public-id="<%= contract.public_id %>" 
              data-vendor-public-id="<%= contract.vendor&.public_id %>">Reviewed</p>
            <p class="hover:bg-gray-200 text-slate-600 cursor-pointer px-5 py-2" role="menuitem" tabindex="-1" id="menu-item-2">
              <%= link_to contract.archived? ? 'Unarchived' : 'Archived', contract.archived? ? unarchive_contract_path(contract) : archive_contract_path(contract), class: 'btn-link text-slate-600 hover:text-slate-600' %>
              </p>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="flex md:flex-row flex-col justify-between mt-10">
  <div class="md:w-2/3 w-full">
    <%= render partial: 'contracts/summary', locals: { contract: contract } %>
    <div id="products<%= contract.id %>" class="mt-10">
      <%= render 'contracts/products', contract: contract %>
    </div>
  </div>
  <div class="md:w-1/3 w-full md:pl-8 mt-10 md:mt-0">
    <%= render 'contracts/documents', contract: contract, info_text: true %>
  </div>
</div>
<%= render partial: 'contracts/edit_contract', locals: { contract: contract } %>
